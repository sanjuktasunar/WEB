@model Web.Entity.Dto.UserSite.UserIndexDto
@{
    Layout = "~/Views/Shared/_FrontLayout.cshtml";
}
<style>

    .card-img-top {
        height: 200px;
        width: 100%;
    }

    .py-5 {
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
    }

    .text-decoration-none {
        margin-bottom: 2%;
    }
  
</style>

<div class="banner-wrapper bg-light">
    <div id="index_banner" class="banner-vertical-center-index container-fluid pt-5">
        <!-- Start slider -->
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <ol class="carousel-indicators">
                <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></li>
                <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></li>
                <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active" id="item1">
                    <div class="py-5 row d-flex align-items-center">
                        <div class="banner-content col-lg-8 col-8 offset-2 m-lg-auto text-left py-5 pb-5">
                            <h1 class="banner-heading h1 text-secondary display-3 mb-0 pb-5 mx-0 px-0 light-300 typo-space-line">
                                <strong>जीवन बदल्ने साझा मंचमा हजुरलाई स्वागत छ</strong>
                            </h1>
                         
                        </div>
                    </div>

                </div>
                <div class="carousel-item" id="item2">
                    <div class="py-5 row d-flex align-items-center">
                        <div class="banner-content col-lg-8 col-8 offset-2 m-lg-auto text-left py-5 pb-5">
                            <h1 class="banner-heading h2 text-secondary display-3 mb-0 pb-3 mx-0 px-0 light-300">
                                <strong>
                                    यहाँ समृद्धिको एउटा यात्रा निर्धारण गरिएको छ।
                                    आउनु होस् यो गन्तव्यमा संग सगै हिडौ ।
                                </strong>
                            </h1>
                        </div>
                    </div>
                </div>
                <div class="carousel-item" id="item3">
                    <div class="py-5 row d-flex align-items-center">
                        <div class="banner-content col-lg-8 col-8 offset-2 m-lg-auto text-left py-5 pb-5">
                            <h1 class="banner-heading h2 text-secondary display-3 mb-0 pb-3 mx-0 px-0 light-300">
                                <strong> हातेमालो गरि अगाडी बढ्न हामी तत्पर छौ ।</strong>
                            </h1>
                            <p class="banner-body text-muted py-3 mx-0 px-0"> आफ्नो , मित्रजनको जीवन समृद्ध  बनाउने समृद्धिको अभियानमा रास्ट्रलाई समेत सघाउने इच्छा आकांक्षा राख्ने रचनात्मक सपना देख्ने जो कोहि हामी संग जोडिन सक्नु हुनेछ ।</p>
                           
                        </div>

                    </div>
                    
                </div>
            </div>
            <a class="carousel-control-prev text-decoration-none" href="#carouselExampleIndicators" role="button" data-bs-slide="prev">
                <i class='bx bx-chevron-left'></i>
                <span class="visually-hidden">Previous</span>
            </a>
            <a class="carousel-control-next text-decoration-none" href="#carouselExampleIndicators" role="button" data-bs-slide="next">
                <i class='bx bx-chevron-right'></i>
                <span class="visually-hidden">Next</span>
            </a>
        </div>
        <!-- End slider -->

    </div>
</div>


<section class="service-wrapper py-3">
    @*<div class="container-fluid pb-3">
        <div class="row">
            <h2 class="h2 text-center col-12 py-5 semi-bold-600">Services</h2>
            <div class="service-header col-2 col-lg-3 text-end light-300">
                <i class='bx bx-gift h3 mt-1'></i>
            </div>
            <div class="service-heading col-10 col-lg-9 text-start float-end light-300">
                <h2 class="h3 pb-4 typo-space-line">Make Success for future</h2>
            </div>
        </div>
        <p class="service-footer col-10 offset-2 col-lg-9 offset-lg-3 text-start pb-3 text-muted px-2">
            You are free to use this template for your commercial or business websites. You are not allowed to re-distribute this template ZIP file on any template collection websites. It is too easy to illegally copy and repost this template.
        </p>
    </div>*@
    @{
        var parentProducts = Model.ParentProductDto;
        int i = 0;
    }
    <div class="service-tag py-5 bg-secondary">
        <div class="col-md-12">
            <ul class="nav d-flex justify-content-center">
                @foreach (var parentProduct in parentProducts)
                {
                    i = i + 1;
                    var idName = "parentId" + i;
                    string className = "filter-btn nav-link btn-outline-primary rounded-pill text-light px-4 light-300";
                    if (i == 1)
                    {
                        className = "filter-btn nav-link btn-outline-primary active shadow rounded-pill text-light px-4 light-300";
                    }
                    string dataFilter = "." + parentProduct.ProductId;
                    <li class="filter-btn nav-item mx-lg-4">
                        <a class="@className" href="#" id="@idName" data-filter="@dataFilter" onclick="showChildProduct('@parentProduct.ProductId')">@parentProduct.ProductName</a>
                    </li>
                }
            </ul>
        </div>
    </div>

</section>

<section class="container py-5" id="childProduct">
    <div class="row projects gx-lg-5" id="childDiv">
        <div class="navbar-brand h1">
            <i class="bx bx-cog"></i>
            <span class="text-dark h4">Loading......</span>
        </div>
    </div>
</section>

@Scripts.Render("~/web/front-end")
<script>
    $(document).ready(function () {
        var className = $("#parentId1").attr('data-filter');
        var id = className.split('.');
        showChildProduct(id[1]);
    })
    $('.filter-btn').click(function (evt) {
        $("#childProduct").empty();
        $("#childProduct").append('<div class="row projects gx-lg-5" id="childDiv"></div>');
        $('#childDiv').append('<div class="navbar-brand h1"><i class="bx bx-cog h3 mt-1"></i> <span class="text-dark h4">Loading......</span></div>');
        evt.preventDefault();
        $(".filter-btn").removeClass("active");
        $(".filter-btn").removeClass("shadow");
        $(this).addClass("active");
        $(this).addClass("shadow");

        var id = $(this).attr('data-filter');
        var parentProductId = id.split('.');
        showChildProduct(parentProductId[1]);
    })
    function showChildProduct(id) {
        $.ajax({
            type: "get",
            url: "/Home/GetChildProductByParentProductId/" + id,
            success: function (response) {
                $("#childProduct").empty();
                $("#childProduct").append('<div class="row projects gx-lg-5" id="childDiv"></div>');
                $.each(response.data, function (index, res) {
                    var imgId = index + res.ProductCode;
                    $("#childDiv").append('<a href="/ProductDetails/'+res.ProductId+'" class="col-sm-6 col-lg-3 text-decoration-none project marketing social business">'
                        + '<div class="service-work overflow-hidden card mb-5 mx-5 m-sm-0"">'
                        + '<img id=' + imgId + ' class="card-img-top">'
                        + '<div class="card-body">'
                        + '<h5 class="card-title light-300 text-dark">' + res.ProductNameNepali + '</h5>'
                        + '</div>'
                        + '</div>'
                        + '</a>');
                    var baseString = 'data:image;base64,' + res.ProductImage.ImageString;
                    document.getElementById(imgId).src = baseString;
                })
                var href = "/Products?parentProductId=" + id;
                $("#childProduct").find('#childDiv').append('<a href=' + href + '>More.....</a>')

            }
        })
    }
</script>
